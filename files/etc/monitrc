set daemon 60              # check services at 60 seconds intervals
   with start delay 5    # optional: delay the first check by 4-minutes (by 
set logfile /var/log/monit.log

set mailserver 192.168.0.190, cuatro, localhost 
set mail-format {
     from: dan.morriss115@gmail.com
  subject: monit alert --  $EVENT $SERVICE
  message: $EVENT Service $SERVICE
                Date:        $DATE
                Action:      $ACTION
                Host:        $HOST
                Description: $DESCRIPTION

           Your faithful employee,
           Monit
}
set httpd port 2812 and
    allow 0.0.0.0/0        # allow localhost to connect to the server and
    allow admin:monit      # require user 'admin' with password 'monit'




# check program sshd-service with path "/usr/local/bin/monit-sshd-check.sh"
# with timeout 60 seconds
# if status = 3 then alert

# check program postfix-service with path "/usr/local/bin/monit-postfix-check.sh"
# with timeout 60 seconds
# if status = 3 then alert

# check program named-service with path "/usr/local/bin/monit-named-check.sh"
# with timeout 60 seconds
# if status = 3 then alert

# check program httpd-service with path "/usr/local/bin/monit-httpd-check.sh"
# with timeout 60 seconds
# if status = 3 then alert

# check program docker-service with path "/usr/local/bin/monit-docker-check.sh"
# with timeout 60 seconds
# if status = 3 then alert

# check program bbsd-service with path "/usr/local/bin/monit-bbsd-check.sh"
# with timeout 60 seconds
# if status = 3 then alert

# check program haproxy-service with path "/usr/local/bin/monit-haproxy-check.sh"
# with timeout 60 seconds
# if status = 3 then alert



check host picluster-190 with address 192.168.0.190 every 1 cycles
    if failed
        port 23
    then alert
    if failed
        port 2812 
        with timeout 15 seconds for 3 times within 4 cycles
    then alert
    if failed
        port 80
        protocol http
        request "/"
        status = 200
    then alert
    if failed
        port 53 
        protocol dns 
    then alert
    if failed
        port 25
        protocol smtp
    then alert

check host uno-180 with address 192.168.0.180 
   if failed
        port 8080
        protocol http
        request "/"
        status = 200
        with timeout 15 seconds for 3 times within 4 cycles 
    then alert
    if failed
        port 8024
        with timeout 15 seconds for 3 times within 4 cycles 
    then alert
    if failed
        port 53
        protocol dns
    then alert
    if failed
        port 22
        protocol ssh
	with timeout 15 seconds for 3 times within 4 cycles
    then alert


check host dos-181 with address 192.168.0.181
   if failed
        port 8080
        protocol http
        request "/"
        status = 200
        with timeout 15 seconds for 3 times within 4 cycles
    then alert
    if failed
        port 8024
        with timeout 15 seconds for 3 times within 4 cycles
    then alert
    if failed
        port 53
        protocol dns
    then alert
    if failed
        port 22
        protocol ssh
    with timeout 15 seconds for 3 times within 4 cycles
    then alert


check host tres-182 with address 192.168.0.182
   if failed
        port 8080
        protocol http
        request "/"
        status = 200
        with timeout 15 seconds for 3 times within 4 cycles
    then alert
    if failed
        port 8024
        with timeout 15 seconds for 3 times within 4 cycles
    then alert
    if failed
        port 53
        protocol dns
    then alert
    if failed
        port 22
        protocol ssh
    with timeout 15 seconds for 3 times within 4 cycles
    then alert


check host cuatro-183 with address 192.168.0.183
   if failed
        port 8080
        protocol http
        request "/"
        status = 200
        with timeout 15 seconds for 3 times within 4 cycles
    then alert
    if failed
        port 8024
        with timeout 15 seconds for 3 times within 4 cycles
    then alert
    if failed
        port 53
        protocol dns
    then alert
    if failed
        port 22
        protocol ssh
    with timeout 15 seconds for 3 times within 4 cycles
    then alert




    

# include /etc/monit.d/*
